<!DOCTYPE html>
<html lang="en">
	<head>

		<title>Editor (alpha 0.1.7.1)</title>

		<meta charset="utf-8">
		<meta name="generator" content="Three.js Editor">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<link rel="stylesheet" href="/css/joystick.css">
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootbox-dialoges.css">
		<link rel="stylesheet" href="/css/jcrop.css">

		<script src="/js/watch.js"></script>
		<script src="/js/Objectid.js"></script>
		<script src="/js/jquery.min.js"></script> 
		<script src="/js/system.min.js"></script>
		<script src="/js/signals.min.js"></script>
		<script src="/js/inflate.min.js"></script>
		<script src="/js/zangodb.min.js"></script>
		<script src="/js/bootstrap.min.js"></script>
		<script src="/js/validator.min.js"></script>
		<script src="/js/hold-event.min.js"></script>
		<script src="/js/jcrop.js"></script>

		<style>

			body {
				margin: 0px;
				font-size: 13px;
				font-family: sans-serif;
				background-repeat: repeat;
				background-image: url("https://i.imgur.com/rnZZU0i.png") !important;
				overflow: hidden;
			}

			#loading-bar {
				width:100%;
				height:100%;
				top:0; left:0;
				position:fixed;
				display:flex;
				align-items:center;
				justify-content:center;
			}

			.middle > * {
				top:0; 
				left:0;
				right:0;
				bottom:0;
				margin:auto;
				position:absolute;
			}

			#joystick1 {
				right: calc(40px + 370px);
			}
			
			#jumpButton {
				right: calc(105px + 370px);
			}

			.btn-matcap,
			.btn-terrain {
				padding:0;
				float:left;
				width:55px;
				height:55px;
				border:1px solid;
				border-radius:4px;
				margin-right:4px;
				margin-bottom:4px;
				display:inline-block;
			}

			.btn-matcap + .btn-matcap,
			.btn-terrain + .btn-terrain {
				margin-right:4px;
			}

		</style>
	</head>

	<body ontouchstart="">

		<script src="/editor/js/TabUI.js"></script>

		<script>
			const debugMode = true;
			const Signal = signals.Signal;
			const RAD2DEG = 57.29577951308232;
			const DEG2RAD = 0.017453292519943295;
			document.body.appendChild( createSidePanel() );
		</script>

		<script src="/editor/js/three.js"></script>
		<script src="/editor/js/MeshWalk.js"></script>
		<script src="/editor/js/UVsDebug.js"></script>
		<script src="/editor/js/FBXLoader.js"></script>
		<script src="/editor/js/VirtualInput.js"></script>
		<script src="/editor/js/KeyboardState.js"></script>
		<script src="/editor/js/EditorControls.js"></script>
		<script src="/editor/js/camera-controls.js"></script>
		<script src="/editor/js/SubdivisionModifier.js"></script>
		<script src="/editor/js/three-pathfinding.umd.js"></script>

		<script src="/threejs/r96/examples/js/loaders/MTLLoader.js"></script>
		<script src="/threejs/r96/examples/js/loaders/OBJLoader.js"></script>
		<script src="/threejs/r96/examples/js/loaders/GLTFLoader.js"></script>

		<script src="/threejs/r96/examples/js/exporters/GLTFExporter.js"></script>
		<script src="/threejs/r96/examples/js/exporters/STLExporter.js"></script>
		<script src="/threejs/r96/examples/js/exporters/OBJExporter.js"></script>
		<script src="/threejs/r96/examples/js/exporters/ColladaExporter.js"></script>

	<!-- Water.js -->

		<script src="/editor/js/Ocean_fft.js"></script>
		<script src="/editor/js/MirrorRenderer.js"></script>
		<script src="/editor/js/WaterMaterial.js"></script>

	<!-- Engine.js -->

		<script src="/editor/core/helpers.js"></script>
		<script src="/editor/core/keyboard.js"></script>
		<script src="/editor/core/enviroment.js"></script>
		<script src="/editor/core/localPlayer.js"></script>
		<script src="/editor/core/cameraControls.js"></script>
		<script src="/editor/core/keyboardState.js"></script>
		<script src="/editor/core/keyInputControls.js"></script>
		<script src="/editor/core/joystickControls.js"></script>

	<!-- Editor.js -->

		<script src="/editor/src/EntityManager.js"></script>
		<script src="/editor/src/MaterialManager.js"></script>
		<script src="/editor/src/TexturesManager.js"></script>
		<script src="/editor/src/UndoArray.js"></script>
		<script src="/editor/src/imgru-db.js"></script>
		<script src="/editor/src/editor-meta.js"></script>
		<script src="/editor/src/material-db.js"></script>

		<script src="/editor/src/editor-tab-ui.js"></script>
		<script src="/editor/src/geometry-tab-ui.js"></script>
		<script src="/editor/src/material-tab-ui.js"></script>
		<script src="/editor/src/material-editor-textures-tab-ui.js"></script>
		<script src="/editor/src/images-tab-ui.js"></script>
		<script src="/editor/src/skydome-tab-ui.js"></script>
		<script src="/editor/src/textures-tab-ui.js"></script>

		<script src="/editor/src/watchers-call-ui.js"></script>
		<script src="/editor/src/entities-helpers.js"></script>
		<script src="/editor/src/TextureEditor.js"></script>
		<script src="/editor/src/MaterialEditor.js"></script>
		<script src="/editor/src/Object3DEditor.js"></script>
		<script src="/editor/src/RigidObjects.js"></script>
		<script src="/editor/src/editor-droplists.js"></script>
		<script src="/editor/src/edges-helper.js"></script>
		<script src="/editor/src/octree-helpers.js"></script>
		<script src="/editor/src/geometry-buttons.js"></script>
		<script src="/editor/src/geometry-inputs.js"></script>
		<script src="/editor/src/editor-buttons.js"></script>
		<script src="/editor/src/rigid-objects-buttons.js"></script>
		<script src="/editor/src/editor-key-inputs.js"></script>
		<script src="/editor/src/editor-mouse-inputs.js"></script>
		<script src="/editor/src/editor-manager.js"></script>
		<script src="/editor/src/editor-systems.js"></script>
		<script src="/editor/src/material-droplists.js"></script>
		<script src="/editor/src/material-manager.js"></script>
		<script src="/editor/src/material-buttons.js"></script>
		<script src="/editor/src/material-key-inputs.js"></script>
		<script src="/editor/src/material-mouse-inputs.js"></script>
		<script src="/editor/src/texture-droplists.js"></script>
		<script src="/editor/src/texture-manager.js"></script>
		<script src="/editor/src/texture-buttons.js"></script>
		<script src="/editor/src/texture-key-inputs.js"></script>
		<script src="/editor/src/texture-mouse-inputs.js"></script>
		<script src="/editor/src/texture-viewer.js"></script>
		<script src="/editor/src/editor-center-helper.js"></script>
		<script src="/editor/src/Water.js"></script>
		<script src="/editor/src/Skydome.js"></script>
		<script src="/editor/src/skydome-droplist.js"></script>
		<script src="/editor/src/background-droplist.js"></script>
		<script src="/editor/src/skydome-buttons.js"></script>
		<script src="/editor/src/images-inputs.js"></script>
		<script src="/editor/src/images-uploads.js"></script>

		<script src="/editor/src/create-new-material-tab-ui.js"></script>
		<script src="/editor/src/create-new-material-viewer.js"></script>
		<script src="/editor/src/create-new-material-buttons.js"></script>

		<script src="/editor/src/material-library-tab-ui.js"></script>
		<script src="/editor/src/material-library-upload-button.js"></script>
		<script src="/editor/src/material-library-update-button.js"></script>
		<script src="/editor/src/material-library-inputs.js"></script>

		<script src="/editor/src/MaterialEditorViewer.js"></script>
		<script src="/editor/src/material-editor-textures-buttons.js"></script>
		<script src="/editor/src/material-editor-textures-key-inputs.js"></script>
		<script src="/editor/src/material-editor-textures-mouse-inputs.js"></script>
		<script src="/editor/src/material-editor-textures-droplists.js"></script>

		<script>

		//	sweethome-model3D-tab-ui.js

			TabUI.add( "Model3D", "model-3d-tab" ); 
			TabUI.append( "Model3D" ); TabUI.Model3D.pill.innerHTML = "3D&nbsp;Model";

		//	model3D-collection-droplist-ui.js

			(function( tab ){

			//	model3D Collections droplist.

				var row = document.createElement("h3"); 
				row.textContent = "Collection:"; row.style.cssText = "height:30px;"

				var select = document.createElement("select"); select.id = "model-3d-collection-droplist";
				select.style.cssText = "width:150px;color:#000;float:right;border:1px solid;border-radius:4px;";
				select.style.cssText += "padding:2px 4px 4px 4px;font-size:20px;margin-left:10px;margin-right:15px;";

				var keys  = "trees,scopia,reallusion,katorlegaz,contributions,lucapresidente,blendswap-cc-0,blendswap-cc-by"; // debug!

				keys.split(",").forEach(function( name ){
					var option = document.createElement("option");
					option.text = name; option.value = name; select.appendChild( option );
				});

				row.appendChild( select ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	model3D-viewer-ui.js

			(function( tab ){

			//	model3D viewer.

				const dummy_src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";
				var row = document.createElement("h3"); row.style.cssText = "height:260px;border:none;text-align:center;"; // margin-right:15px;

				var img = new Image(256,256); img.src = dummy_src; img.id = "model-3d-image-viewer";
				img.style.cssText = "width:256px;height:256px;margin:auto;background-repeat:repeat;";
				img.style.cssText += "background-image:url('https://i.imgur.com/rnZZU0i.png') !important;";

				watch( img, "onload", function(prop, event, value){ ; });
				watch( img, "onerror", function(prop, event, value){ img.src = value; });

				img.addEventListener("load",function(event){ callWatchers( this, "onload", "load", this.src ); })
				img.addEventListener("error",function(err){ callWatchers( this, "onerror", "error", dummy_src ); })

				row.appendChild( img ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	model3D-name-input-ui.js

			(function( tab ){

			//	model3D name input.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin:10px 15px;";

				var prev = document.createElement("li"); prev.id = "model-3d-doc-previous";
				prev.innerHTML = "&#9668;"; prev.style.display = "inline";
				prev.classList.add("btn","btn-primary","get-prev-btn","pull-left");

				var next = document.createElement("li"); next.id = "model-3d-doc-next";
				next.innerHTML = "&#9658;"; next.style.display = "inline";
				next.classList.add("btn","btn-primary","get-next-btn","pull-right");

				var input = document.createElement("input"); input.id = "model-3d-name-input";
				input.setAttribute("placeholder", "name" ); input.classList.add("form-control","text-center");
				input.style.cssText = "color:#000;border:none;display:inline;width:180px;margin:0px 10px 0px 10px;";
				input.style.cssText += "text-align:center;font-size:large;font-weigth:bold;background:none;";

				row.appendChild(prev); row.appendChild(input); row.appendChild(next); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	model3D-import-button-ui.js

			(function( tab ){

			//	Sweethome3D Import button.

				var row = document.createElement("h3"); row.style.cssText = "height:40px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "model-3d-import-button"; button.textContent = "Import Model";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		</script>

		<script>

		//	sweethome-upload-droplist-ui.js

			(function( tab ){

			//	Sweethome3D Uploader droplist.

				var row = document.createElement("h3"); 
				row.textContent = "Upload:"; row.style.cssText = "height:30px;"

				var select = document.createElement("select"); select.id = "sweethome-3d-upload-droplist";
				select.style.cssText = "width:150px;color:#000;float:right;border:1px solid;border-radius:4px;";
				select.style.cssText += "padding:2px 4px 4px 4px;font-size:20px;margin-left:10px;margin-right:15px;";

				var keys  = "trees,scopia,reallusion,katorlegaz,contributions,lucapresidente,blendswap-cc-0,blendswap-cc-by"; // debug!

				keys.split(",").forEach(function( name ){
					var option = document.createElement("option");
					option.text = name; option.value = name; select.appendChild( option );
				});

				row.appendChild( select ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	sweethome-mtl-file-ui.js

			(function( tab ){

			//	Sweethome3D mtl button.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "sweethome-3d-mtl-button"; button.textContent = "Select MTL file";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				var input = document.createElement("input"); input.type = "file"; 
				input.id = "sweethome-3d-mtl-file-input"; input.style.cssText = "display:none;"; 
				button.appendChild( input ); row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	sweethome-texture-files-ui.js

			(function( tab ){

			//	Sweethome3D textures button.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "sweethome-3d-textures-button"; button.textContent = "Select Textures";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				var input = document.createElement("input"); input.type = "file"; 
				input.id = "sweethome-3d-textures-file-input"; input.style.cssText = "display:none;"; 
				input.setAttribute( "multiple", "" ); // true.
				
				button.appendChild( input ); row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	sweethome-obj-file-ui.js

			(function( tab ){

			//	Sweethome3D obj button.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "sweethome-3d-obj-button"; button.textContent = "Select OBJ file";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				var input = document.createElement("input"); input.type = "file"; 
				input.id = "sweethome-3d-obj-file-input"; input.style.cssText = "display:none;"; 
				button.appendChild( input ); row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	sweethome-preview-file-ui.js

			(function( tab ){

			//	Sweethome3D preview button.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "sweethome-3d-preview-button"; button.textContent = "Select Image file";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				var input = document.createElement("input"); input.type = "file"; 
				input.id = "sweethome-3d-preview-file-input"; input.style.cssText = "display:none;"; 
				button.appendChild( input ); row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		//	sweethome-upload-button-ui.js

			(function( tab ){

			//	Sweethome3D Upload button.

				var row = document.createElement("h3"); row.style.cssText = "height:30px;margin-bottom:20px;"

				var button = document.createElement("div"); 
				button.id = "sweethome-3d-upload-button"; button.textContent = "Upload Model";
				button.classList.add( "form-control","btn", "btn-primary","btn-white-outline","gradient-btn" );
				button.style.cssText = "width:-webkit-fill-available;float:right;height:40px;";
				button.style.cssText += "font-size:large;margin-left:15px;margin-right:15px;";

				row.appendChild( button ); tab.appendChild( row );

			})( TabUI.Model3D.tab );

		</script>

		<script>

			TabUI.Model3D.role.classList.add("active");
			TabUI.Model3D.tab.classList.add("in","active");
			TabUI.Model3D.pill.scrollIntoViewIfNeeded(false);

		//	scene.add(ground);
		//	mirror.visible = !mirror.visible; 
		//	ground.visible = !ground.visible; 
			groundHelper.visible = !groundHelper.visible; 


		//	Add entities.
		//	entities.add(scene);
		//	entities.add(mirror);
		//	entities.add(ground);
		//	entities.add(localPlayer);
			entities.add(groundHelper);
			entities.add(localPlayer.getObjectByName("local helper"));

			cameraControls.setLatLon(5.128, 270.675);
			localPlayer.controller.movementSpeed = 20;
			localPlayer.controller.center.set(-85,2,-2);
		//	localPlayer.visible = !localPlayer.visible; 

		</script>

		<script src="/editor/src/database-tab-ui.js"></script>
		<script src="/editor/src/database-inputs.js"></script>
	<!-- script src="/editor/src/ViewportTab.js"></script -->
		<script src="/editor/src/playground.js"></script>

	</body>
</html>
